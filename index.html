<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>USD/JPY ONI-HAYA DASHBOARD</title>
    <style>
        :root {
            --bg-color: #000000;
            --text-color: #00ff00;
            --accent-color: #008800;
            --font-family: 'Courier New', Courier, monospace;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-family);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        /* 鬼速ロードのためのスケルトン表示 */
        .loading-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s;
        }

        header {
            padding: 10px 15px;
            border-bottom: 1px solid var(--text-color);
            background: rgba(0, 20, 0, 0.9);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title { font-size: 1rem; font-weight: bold; }
        .clock { font-size: 0.8rem; }

        /* メインレイアウト */
        .container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 10px;
            padding: 10px;
            flex: 1;
        }

        /* 予報セクション（最上部に配置） */
        .forecast-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .forecast-card {
            border: 1px solid var(--accent-color);
            background: #050505;
            border-radius: 4px;
            overflow: hidden;
        }

        .forecast-header {
            font-size: 0.7rem;
            padding: 4px;
            background: var(--accent-color);
            color: #000;
            text-align: center;
            font-weight: bold;
        }

        .widget-box { height: 130px; }

        /* チャートセクション */
        .main-content { display: flex; flex-direction: column; gap: 10px; }
        
        .chart-box {
            flex: 1;
            min-height: 400px;
            border: 1px solid var(--accent-color);
            position: relative;
        }

        /* 経済カレンダー */
        .side-content {
            border-left: 1px solid var(--accent-color);
            padding-left: 10px;
        }

        .section-label {
            font-size: 0.8rem;
            padding: 5px;
            color: #000;
            background: var(--text-color);
            display: inline-block;
            margin-bottom: 5px;
        }

        /* スマホ最適化 */
        @media (max-width: 850px) {
            .container { grid-template-columns: 1fr; }
            .side-content { border-left: none; padding-left: 0; margin-top: 20px; }
            .forecast-grid { grid-template-columns: 1fr; }
            .chart-box { height: 350px; }
            .widget-box { height: 150px; }
        }

        /* TradingViewのロゴ等を最小化 */
        .tradingview-widget-copyright { display: none !important; }
    </style>
</head>
<body onload="document.getElementById('loader').style.opacity='0';setTimeout(()=>document.getElementById('loader').remove(),500)">

    <div id="loader" class="loading-overlay">SYSTEM BOOTING...</div>

    <header>
        <div class="top-bar">
            <div class="title">USD/JPY ONI-HAYA v4</div>
            <div id="clock" class="clock">00:00:00.000</div>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <!-- 予報エリア -->
            <div class="forecast-grid">
                <div class="forecast-card">
                    <div class="forecast-header">⚡ 短期 (30M)</div>
                    <div class="widget-box">
                        <div class="tradingview-widget-container">
                            <div class="tradingview-widget-container__widget"></div>
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                            {
                                "interval": "30m",
                                "width": "100%",
                                "isTransparent": true,
                                "height": "100%",
                                "symbol": "FX:USDJPY",
                                "showIntervalTabs": false,
                                "displayMode": "single",
                                "locale": "ja",
                                "colorTheme": "dark"
                            }
                            <\/script>
                        </div>
                    </div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-header">☁ 中期 (2H)</div>
                    <div class="widget-box">
                        <div class="tradingview-widget-container">
                            <div class="tradingview-widget-container__widget"></div>
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                            {
                                "interval": "2h",
                                "width": "100%",
                                "isTransparent": true,
                                "height": "100%",
                                "symbol": "FX:USDJPY",
                                "showIntervalTabs": false,
                                "displayMode": "single",
                                "locale": "ja",
                                "colorTheme": "dark"
                            }
                            <\/script>
                        </div>
                    </div>
                </div>
                <div class="forecast-card">
                    <div class="forecast-header">☀ 長期 (1D)</div>
                    <div class="widget-box">
                        <div class="tradingview-widget-container">
                            <div class="tradingview-widget-container__widget"></div>
                            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-technical-analysis.js" async>
                            {
                                "interval": "1D",
                                "width": "100%",
                                "isTransparent": true,
                                "height": "100%",
                                "symbol": "FX:USDJPY",
                                "showIntervalTabs": false,
                                "displayMode": "single",
                                "locale": "ja",
                                "colorTheme": "dark"
                            }
                            <\/script>
                        </div>
                    </div>
                </div>
            </div>

            <!-- チャートエリア（軽量版 Symbol Overview に変更して高速化） -->
            <div class="section-label">LIVE TICKER & CHART</div>
            <div class="chart-box">
                <div class="tradingview-widget-container" style="height:100%;width:100%">
                    <div class="tradingview-widget-container__widget" style="height:100%;width:100%"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-overview.js" async>
                    {
                      "symbols": [["FX:USDJPY|1D"]],
                      "chartOnly": false,
                      "width": "100%",
                      "height": "100%",
                      "locale": "ja",
                      "colorTheme": "dark",
                      "autosize": true,
                      "showVolume": false,
                      "showMA": false,
                      "hideDateRanges": false,
                      "hideMarketStatus": false,
                      "hideSymbolLogo": false,
                      "scalePosition": "right",
                      "scaleMode": "Normal",
                      "fontFamily": "-apple-system, BlinkMacSystemFont, Trebuchet MS, Roboto, Ubuntu, sans-serif",
                      "fontSize": "10",
                      "noTimeScale": false,
                      "valuesTracking": "1",
                      "changeMode": "price-and-percent",
                      "chartType": "area",
                      "maLineColor": "#2962FF",
                      "maLineWidth": 1,
                      "maLength": 9,
                      "lineWidth": 2,
                      "lineType": 0,
                      "dateRanges": ["1d", "5d", "1m", "3m", "6m", "ytd", "1y", "all"]
                    }
                    <\/script>
                </div>
            </div>
        </div>

        <div class="side-content">
            <div class="section-label">ECONOMIC CALENDAR</div>
            <div style="height: 500px;">
                <div class="tradingview-widget-container">
                    <div class="tradingview-widget-container__widget"></div>
                    <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-events.js" async>
                    {
                        "colorTheme": "dark",
                        "isTransparent": true,
                        "width": "100%",
                        "height": "100%",
                        "locale": "ja",
                        "importanceFilter": "0,1",
                        "countryFilter": "jp,us"
                    }
                    <\/script>
                </div>
            </div>
        </div>
    </div>

    <script>
        function updateClock() {
            const now = new Date();
            const timeStr = now.getHours().toString().padStart(2, '0') + ':' +
                          now.getMinutes().toString().padStart(2, '0') + ':' +
                          now.getSeconds().toString().padStart(2, '0') + '.' +
                          now.getMilliseconds().toString().padStart(3, '0');
            document.getElementById('clock').textContent = timeStr;
        }
        setInterval(updateClock, 10);
        updateClock();
    </script>
</body>
                        </html>
